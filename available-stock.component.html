
 <div class="progress-spinner" *ngIf="IsSpinner">
        <p-progressSpinner></p-progressSpinner>
    </div>
        
    <p-overlayPanel #op1 >
        <img src="assets/demo/images/nature/nature1.jpg" alt="Nature 1" />
    </p-overlayPanel> 
    <p-toast></p-toast>

    <p-contextMenu #cm [model]="items"></p-contextMenu>

    <p-dialog header="Product Image" [(visible)]="displayImage" modal="modal" showEffect="fade">
        <img src="{{imgSrc}}"  height="500" width="500" >
      </p-dialog>  
    <div class="p-col-12 p-m-0 p-p-0  p-shadow-2">
        <div class="card">
 
            <p-toolbar styleclass="p-mb-4">
                <div>
                    
                        <div class="p-fluid p-formgrid p-grid">
                                <div class="p-field p-col">
                                    <label for="firstname1">{{'REPORTS.OUTLET'| translate}}</label>
                                    <p-dropdown  placeholder="Select Outlet" [options]="OutletDropdown" [(ngModel)]="selectedOutletID" autoWidth="false" [style]="{'width':'200px'}"  required filter="true" >
                                            <ng-template let-item pTemplate="selectedItem">
                                                <span style="vertical-align:middle; margin-left: .5em;" >{{item.label}}</span>
                                            </ng-template>
                                            
                                        </p-dropdown> 
                                </div>
                               
                                <div class="p-field p-col">
                                        <label for="firstname1">{{'GENRIC.SEARCHBYDATE'| translate}}</label>
                                        <p-dropdown  placeholder="Select Search By Date" [options]="SearchByDateDropdown" [(ngModel)]="selectedSearchByDateID" autoWidth="false" [style]="{'width':'200px'}" (onChange)="SearchByDate($event)"  required filter="true" >
                                                <ng-template let-item pTemplate="selectedItem">
                                                    <span style="vertical-align:middle; margin-left: .5em" >{{item.label}}</span>
                                                </ng-template>
                                                
                                            </p-dropdown> 
                                    </div>

                                    <div class="p-field p-col">
                                            <label for="firstname1">{{'REPORTS.SEARCHBY '| translate}}</label>
                                            <p-dropdown placeholder="Select Search By" [options]="SearchByDropdown" [(ngModel)]="selectedSearchByID" autoWidth="false" [style]="{'width':'200px'}" (onChange)="SearchBy($event)" required filter="true" >
                                                    <ng-template let-item pTemplate="selectedItem">
                                                        <span style="vertical-align:middle; margin-left: .5em" >{{item.label}}</span>
                                                    </ng-template>
                                                    
                                                </p-dropdown> 
                                        </div>

                                        <div class="p-field p-col" *ngIf="IsClassificationSearch">
                                                <label for="firstname1">Classification</label>
                                                <p-dropdown  placeholder="Select Classification" [options]="ClassificationDropdown" [(ngModel)]="selectedClassificationID" autoWidth="false" [style]="{'width':'200px'}"  required filter="true" >
                                                        <ng-template let-item pTemplate="selectedItem">
                                                            <span style="vertical-align:middle; margin-left: .5em" >{{item.label}}</span>
                                                        </ng-template>
                                                        
                                                    </p-dropdown> 
                                            </div>

                                            <div class="p-field p-col" *ngIf="IsDepartmentSearch">
                                                    <label for="firstname1">Department</label>
                                                    <p-dropdown  placeholder="Select Department" [options]="DepartmentDropdown" [(ngModel)]="selectedDepartmentID" autoWidth="false" [style]="{'width':'200px'}"  required filter="true" >
                                                            <ng-template let-item pTemplate="selectedItem">
                                                                <span style="vertical-align:middle; margin-left: .5em" >{{item.label}}</span>
                                                            </ng-template>
                                                            
                                                        </p-dropdown> 
                                                </div>

                                                <div class="p-field p-col" *ngIf="IsCategorySearch">
                                                        <label for="firstname1">Category</label>
                                                        <p-dropdown  placeholder="Select Category" [options]="CategoryDropdown" [(ngModel)]="selectedCategoryID" autoWidth="false" [style]="{'width':'200px'}"  required filter="true" >
                                                                <ng-template let-item pTemplate="selectedItem">
                                                                    <span style="vertical-align:middle; margin-left: .5em" >{{item.label}}</span>
                                                                </ng-template>
                                                                
                                                            </p-dropdown> 
                                                    </div>

                                                    <div class="p-field p-col" *ngIf="IsSubCategorySearch">
                                                            <label for="firstname1">Sub Category</label>
                                                            <p-dropdown  placeholder="Select Sub Category" [options]="SubCategroyDropdown" [(ngModel)]="selectedSubCategoryID" autoWidth="false" [style]="{'width':'200px'}"  required filter="true" >
                                                                    <ng-template let-item pTemplate="selectedItem">
                                                                        <span style="vertical-align:middle; margin-left: .5em" >{{item.label}}</span>
                                                                    </ng-template>
                                                                    
                                                                </p-dropdown> 
                                                        </div>

                                                        <div class="p-field p-col" *ngIf="IsProductSearch">
                                                                <label for="firstname1">Product</label>
                                                                <p-autoComplete [(ngModel)]="selectedProduct" [suggestions]="filteredProduct" (completeMethod)="search($event)" (onSelect)="BindProductVariant($event)" field="label" [minLength]="1">
                                   
                                                                    </p-autoComplete>
                                                            </div>

                                                            <div class="p-field p-col" *ngIf="IsProductSearch">
                                                                    <label for="firstname1">Variant</label>
                                                                    <p-dropdown  placeholder="Select Variant" [options]="ProductVariantDropdown" [(ngModel)]="selectedProductVariantID" autoWidth="false" [style]="{'width':'200px'}"  required  >
                                                                            <ng-template let-item pTemplate="selectedItem">
                                                                                <span style="vertical-align:middle; margin-left: .5em" >{{item.label}}</span>
                                                                            </ng-template>
                                                                            
                                                                        </p-dropdown> 
                                                                </div>

                                                                <div class="p-field" style="margin-right: 1rem;margin-top: 1.7rem">
                                                                        <button pButton pRipple type="button" label="Reset" style="width:80px" icon="pi pi-refresh" (click)="Reset();" class="p-button-raised p-mr-2"></button>
                                                                    </div>
                                                                
                            </div>

                    
                </div>
    
            </p-toolbar>
            <!-- [(selection)]="selectedOneProduct" -->
            <p-table #dt [value]="AllStockList"  [rows]="rows"  [totalRecords]="totalRecords" [(first)]="first"   
               currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries" 
               [loading]="loading"  [showCurrentPageReport]="true"   
               [contextMenu]="cm"
               [(contextMenuSelection)]="selectedStock"
               [rowsPerPageOptions]=" [25, 50, 100, 200, 500, 1000, 5000]"  
               [paginator]="true"  [rowHover]="true" styleClass="p-datatable-responsive-demo"
               [filterDelay]="0"  [globalFilterFields]="['ProductVariantID','Product','ProductModel','Barcode','RemainingStock']" >
       
            
            <ng-template pTemplate="caption" style="margin-top: 20px">
                <div class="p-d-flex p-ai-center p-jc-between">
                    <h5 class="p-m-0"></h5>
                    <span class="p-input-icon-left">
                    <i class="pi pi-search"></i>
                    <input pInputText (input)="dt.filterGlobal($event.target.value, 'contains')" type="text" placeholder="Global Search"/>
                </span>
                </div>
            </ng-template>
             
             <ng-template pTemplate="header" style="margin-top: 20px" >
                    <tr>
                     
                        <th > Product</th>
                        <th pSortableColumn="ProductVariantID" > SKU<p-sortIcon field="ProductVariantID"></p-sortIcon></th> 
                        <th pSortableColumn="Product"> Name<p-sortIcon field="Product"></p-sortIcon></th> 
                        <th pSortableColumn="ProductModel"> Model<p-sortIcon field="ProductModel"></p-sortIcon></th> 
                        <th pSortableColumn="Barcode"> EAN<p-sortIcon field="Barcode"></p-sortIcon></th> 
                        <th pSortableColumn="RemainingStock"> Available Stock<p-sortIcon field="RemainingStock"></p-sortIcon></th> 
                        
                    </tr>
    
    
                    <tr>
                     
                        
                        <th>
                            
                        </th> 
                        <th>
                            <input pInputText type="text" (input)="dt.filter($event.target.value, 'ProductVariantID', 'contains')" placeholder="Search by SKU" class="p-column-filter">
                        </th>
                        <th>
                            <input pInputText type="text" (input)="dt.filter($event.target.value, 'Product', 'contains')" placeholder="Search by Name" class="p-column-filter">
                        </th>
                        <th>
                            <input pInputText type="text" (input)="dt.filter($event.target.value, 'ProductModel', 'contains')" placeholder="Search by Model" class="p-column-filter">
                        </th>
                        <th>
                            <input pInputText type="text" (input)="dt.filter($event.target.value, 'Barcode', 'contains')" placeholder="Search by EAN" class="p-column-filter">
                        </th>
                        <th>
                            <input pInputText type="text" (input)="dt.filter($event.target.value, 'RemainingStock', 'contains')" placeholder="Search by Remaining Stock" class="p-column-filter">
                        </th>
                     
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-StockModel >
                    <tr [pContextMenuRow]="StockModel">
                        <td>
                            <img  (click)="popUpImageFuction(imageBasePath + StockModel.ProductImage)" [src]="imageBasePath + StockModel.ProductImage" alt="Image Not Found"  width="100" height="100"  class="p-shadow-2" /> 
                        </td>
                       
                        <td>{{StockModel.ProductVariantID}}</td>
                        <!-- <td>{{(StockModel.ProductVariant === null || StockModel.ProductVariant === "") ? StockModel.Product : StockModel.Product + "<br/>(" + StockModel.ProductVariant + ")"}}</td> -->
                        <td>{{StockModel.Product}}</td>
                        <td>{{StockModel.ProductModel}}</td>
                        <td>{{StockModel.Barcode}}</td>
                        <td>{{StockModel.RemainingStock}}</td>
                       
                    </tr>
                </ng-template>
    
            </p-table>
    
        
        </div>
    </div>

    <p-dialog  header="Select Dates"  [(visible)]="isCustomDate" modal="modal" showEffect="fade" [style]="{width: '50vw',height:'400px'}">
        <app-datepickerpopup (onSelectValue)='selectValue($event)'></app-datepickerpopup>
        
    </p-dialog>
    <p-dialog  header="Add to Wishlist"  [(visible)]="isAddToWishlist" modal="modal" showEffect="fade" [style]="{width: '50vw',height:'450px'}">
        <app-addwishlist-dialog [ProductVariantID]='selectedVariantIDforWishlist' [ProductName]='selectedProductNameforWishlist' (ReturnCall)='CloseDialog($event)' ></app-addwishlist-dialog>    
    </p-dialog>
    